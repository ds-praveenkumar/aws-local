version: '3'

services:
  localstack:

    image: localstack/localstack:0.12.2

    ports:

      - "4566-4599:4566-4599"

      - "${PORT_WEB_UI-8080}:${PORT_WEB_UI-8080}"

      - "8055:8080"

    environment:

      - SERVICES=${SERVICES- }

      - DEBUG=${DEBUG- }

      - DATA_DIR=${PWD}/localstack/data

      - PORT_WEB_UI=${PORT_WEB_UI- }

      - LAMBDA_EXECUTOR=${LAMBDA_EXECUTOR- }

      - KINESIS_ERROR_PROBABILITY=${KINESIS_ERROR_PROBABILITY- }

      - DOCKER_HOST=unix:///var/run/docker.sock

      - HOST_TMP_FOLDER=${PWD}/localstack

    volumes:

      - "${PWD}/localstack:/tmp/localstack"

      - "/var/run/docker.sock:/var/run/docker.sock"